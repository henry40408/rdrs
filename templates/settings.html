{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block html_attrs %}{% call macros::theme_attr(theme) %}{% endcall %}{% endblock %}

{% block title %}Settings - RDRS{% endblock %}

{% block flash %}{% call macros::flash(flash_messages) %}{% endcall %}{% endblock %}

{% block content %}
{% call macros::nav("settings", is_admin, is_masquerading, username) %}{% endcall %}

<h1>Settings</h1>

<p>Version: <code>{{ git_version }}</code></p>

<h2>Configuration</h2>
<p class="muted">These settings are configured via environment variables and cannot be changed at runtime.</p>

<h3>HTTP Client</h3>
<table>
    <tbody>
        <tr>
            <th class="settings-th" style="width:200px;">User Agent</th>
            <td>
                <code>{{ user_agent }}</code>
                {% if user_agent_is_default %}
                <span class="muted">(default)</span>
                {% else %}
                <span class="muted">(custom)</span>
                {% endif %}
            </td>
        </tr>
    </tbody>
</table>

<h3>User Registration</h3>
<table>
    <tbody>
        <tr>
            <th class="settings-th" style="width:200px;">Signup Enabled</th>
            <td>
                {% if signup_enabled %}
                <span class="success-text">Yes</span>
                {% else %}
                <span class="muted">No</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th class="settings-th">Multi-User Mode</th>
            <td>
                {% if multi_user_enabled %}
                <span class="success-text">Yes</span>
                {% else %}
                <span class="muted">No</span>
                {% endif %}
            </td>
        </tr>
    </tbody>
</table>

<h3>Environment Variables</h3>
<p class="muted">Configure these environment variables to customize RDRS:</p>
<table>
    <thead>
        <tr>
            <th class="settings-th">Variable</th>
            <th class="settings-th">Description</th>
            <th class="settings-th">Default</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>DATABASE_URL</code></td>
            <td>SQLite database file path</td>
            <td><code>rdrs.sqlite3</code></td>
        </tr>
        <tr>
            <td><code>SERVER_PORT</code></td>
            <td>HTTP server port</td>
            <td><code>3000</code></td>
        </tr>
        <tr>
            <td><code>USER_AGENT</code></td>
            <td>User agent for HTTP requests</td>
            <td><code>RDRS/{version} (...)</code></td>
        </tr>
        <tr>
            <td><code>SIGNUP_ENABLED</code></td>
            <td>Allow new user registration</td>
            <td><code>false</code></td>
        </tr>
        <tr>
            <td><code>MULTI_USER_ENABLED</code></td>
            <td>Allow multiple users</td>
            <td><code>false</code></td>
        </tr>
        <tr>
            <td><code>IMAGE_PROXY_SECRET</code></td>
            <td>Secret key for image proxy URLs</td>
            <td><em>(auto-generated)</em></td>
        </tr>
    </tbody>
</table>

{% endblock %}
